<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>site by nima</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/nima/site">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/nima/site/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/nima/site/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>site</h1>
          <p>Modular shell-scripting framework - 99% native bash, 1% phat!</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/nima">nima</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

        <p><a href="https://travis-ci.org/nima/site"><img src="https://travis-ci.org/nima/site.png?branch=stable" alt="Build Status"></a>
<a href="https://sourcegraph.com/github.com/nima/site"><img src="https://sourcegraph.com/api/repos/github.com/nima/site/counters/views.png" alt="views"></a>
<a href="https://sourcegraph.com/github.com/nima/site"><img src="https://sourcegraph.com/api/repos/github.com/nima/site/badges/authors.png" alt="authors"></a>
<a href="https://sourcegraph.com/github.com/nima/site"><img src="https://sourcegraph.com/api/repos/github.com/nima/site/badges/status.png" alt="status"></a></p>



<h1>
<a name="overview" class="anchor" href="#overview"><span class="octicon octicon-link"></span></a>OVERVIEW</h1>

<p><strong>MISSION STATEMENT</strong>: <em>To simplify and standardize collaborative scripting, reporting and automation tasks</em></p>

<p><strong>TARGET AUDIENCE</strong>: <em>System Administrators, System Engineers, #TechOps, #DevOps, System Reliability Engineers #SREs, and Test Engineers</em></p>

<p>Site was written for its target audience, by its target audience; it is a superset of bash, and structured to scale with your scripting requirements.</p>

<h2>
<a name="news" class="anchor" href="#news"><span class="octicon octicon-link"></span></a>News</h2>

<p><a href="https://twitter.com/SiteSysOpsUtil">Follow @SiteSysOpsUtil on Twitter!</a></p>

<h2>
<a name="the-code" class="anchor" href="#the-code"><span class="octicon octicon-link"></span></a>The Code</h2>

<p>Site is broken up into two main chunks:</p>

<ol>
<li>
<p>The bits that <em>we</em> write/maintain:</p>

<ul>
<li>the <em>site engine</em>: <code>libsite.sh</code>
</li>
<li>the <em>core modules</em>: <code>module/*</code>
</li>
</ul>
</li>
<li>
<p>The bits that <em>you</em> write (and maintain):</p>

<ul>
<li>the <em>user modules</em>: <code>~/.site/module/*</code>
</li>
</ul>
</li>
</ol><p><strong>Quick note to developers</strong>: If you ever write a user module that you'd like to share with us, simply hit us up with a <a href="https://help.github.com/articles/using-pull-requests">github pull request</a>.</p>

<h2>
<a name="the-config" class="anchor" href="#the-config"><span class="octicon octicon-link"></span></a>The Config</h2>

<p>Site is configured in two places:</p>

<ol>
<li>One for <em>your organization</em>: <code>~/.site/etc/site.conf</code>
</li>
<li>One just for <em>you</em>: <code>~/.siterc</code>
</li>
</ol><p>The prior contains things that are specific to your organization and should be in a private VCS/SCM accessible by your team.</p>

<p>The latter contains configuration settings specific to you and your desktop (user details and command alias overrides mostly).  It should not be shared with anyone as it pertains only to you.</p>

<hr><h1>
<a name="requirements" class="anchor" href="#requirements"><span class="octicon octicon-link"></span></a>REQUIREMENTS</h1>

<h2>
<a name="core-requirements" class="anchor" href="#core-requirements"><span class="octicon octicon-link"></span></a>Core Requirements</h2>

<p>You need bash v4.0+ to start with, but this is easier than you might think:  if your version of bash is older, simply compile a newer one locally in you home directory, and set the environment variable <code>SITE_SHELL</code> to point to it.  You don't even need to do this in your user profile, simply place it (and any other overrides) into your <code>~/.siterc</code> or ~/.site/etc/site.conf`.  More on those files later!</p>

<p>You also need a handful of utilities and interpreters such as gnu grep, gawk, gsed, nc, socat, etc. The full list is covered in the installation section bellow.</p>

<h2>
<a name="additional-requirements" class="anchor" href="#additional-requirements"><span class="octicon octicon-link"></span></a>Additional Requirements</h2>

<p>The site modules will themselves check for any python, ruby, or perl module you need for that particular module.</p>

<hr><h1>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>INSTALLATION</h1>

<ol>
<li>
<p>Clone It</p>

<div class="highlight highlight-bash"><pre><span class="nb">cd</span> ~/
git clone https://github.com/nima/site.git
git checkout stable
<span class="nb">cd </span>site
</pre></div>
</li>
<li>
<p>Install prerequisite software</p>

<p>Do what <a href="https://travis-ci.org/nima/site/builds">Travis</a> does:</p>

<div class="highlight highlight-bash"><pre>sed -ne <span class="s1">'/^before_install:/,/^$/{/^ /p}'</span> .travis.yml
</pre></div>
</li>
<li>
<p>Set up yout new <code>PROFILE</code></p>

<div class="highlight highlight-bash"><pre><span class="nb">export </span><span class="nv">PROFILE</span><span class="o">=</span>MYCOMPANY
mkdir -p profile/<span class="k">${</span><span class="nv">PROFILE</span><span class="k">}</span>/etc/
mkdir -p profile/<span class="k">${</span><span class="nv">PROFILE</span><span class="k">}</span>/module/
cp share/examples/site.conf.eg profile/<span class="k">${</span><span class="nv">PROFILE</span><span class="k">}</span>/etc/
cp share/examples/siterc.eg ~/.siterc
</pre></div>
</li>
<li>
<p>Install</p>

<div class="highlight highlight-bash"><pre>make install
</pre></div>
</li>
<li>
<p>Create organizational site git (or other VCS) repository</p>

<div class="highlight highlight-bash"><pre><span class="nb">cd</span>
mv ~/.site/profile/<span class="k">${</span><span class="nv">PROFILE</span><span class="k">}</span> site-<span class="k">${</span><span class="nv">PROFILE</span><span class="k">}</span>
ln -s ~/.site/profile/<span class="k">${</span><span class="nv">PROFILE</span><span class="k">}</span> <span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>/site-<span class="k">${</span><span class="nv">PROFILE</span><span class="k">}</span>
<span class="nb">cd </span>site-<span class="k">${</span><span class="nv">PROFILE</span><span class="k">}</span>
git init .
</pre></div>
</li>
</ol><h2>
<a name="files-and-filesystem-layout" class="anchor" href="#files-and-filesystem-layout"><span class="octicon octicon-link"></span></a>Files and Filesystem Layout</h2>

<p>Site is designed to be run by your local user; it is designed to be installed on your desktop machine, and it will communicate with your hosts remotely.  You should never need to install site on a server.</p>

<h3>
<a name="site-will-not-crap-all-over-your-filesystem-or-home-directory" class="anchor" href="#site-will-not-crap-all-over-your-filesystem-or-home-directory"><span class="octicon octicon-link"></span></a>Site will not crap all over your filesystem or home directory</h3>

<p>Here are the only files that will exist outside of <code>${SITE_SCM}</code> (where you cloned site to):</p>

<ul>
<li><code>~/bin/site -&gt; ${SITE_SCM}/bin/site</code></li>
<li><code>~/.site/</code></li>
<li><code>~/.siterc</code></li>
</ul><p>The installer installs everything required monolithically under <code>~/.site/</code>, and even that is just a set of symbolic links pointing back to various folders within <code>${SITE_SCM}</code>.</p>

<p>The <code>~/.siterc</code> is where you can store configuration overrides for you particular user.</p>

<h3>
<a name="secrets-passwords-and-api-keys" class="anchor" href="#secrets-passwords-and-api-keys"><span class="octicon octicon-link"></span></a>Secrets, Passwords, and API Keys</h3>

<p>Do not store any passwords or sensitive data in this file; site ships with the <em>vault</em> module which was written to address this problem directly:  The file <code>~/.site/etc/site.vault</code> will be a GPG-encrypted file where you cam store all your secrets, passwords, and API keys.</p>

<p>The unencrypted vault has a very simple format: <code>&lt;secret-id&gt;     &lt;secret-token&gt;</code>, one entry per line.  The <code>secret-token</code> can contain spaces of course, or any other character; the first token must be alphanumeric however without any spaces; quotes are taken as literal characters and there is no escaping in this file format.</p>

<p>Site will provide you with the necessary high-level tools to create, edit, and read to and from this file, so you don't have to invoke GPG commands directly.</p>

<p>Note that site also ships with a <em>gpg</em> module which you will want to use first to create your user-specific gpg key.</p>

<h3>
<a name="site-can-be-uninstalled-as-easily-as-it-can-be-installed" class="anchor" href="#site-can-be-uninstalled-as-easily-as-it-can-be-installed"><span class="octicon octicon-link"></span></a>Site can be uninstalled as easily as it can be installed</h3>

<p>To uninstall, simply run <code>make uninstall</code>, and if you want to delete all downloaded third-party software as well, then run <code>make purge</code>.</p>

<h3>
<a name="site-doesnt-expect-your-bash-profile-to-be-changed" class="anchor" href="#site-doesnt-expect-your-bash-profile-to-be-changed"><span class="octicon octicon-link"></span></a>Site doesn't expect your bash profile to be changed</h3>

<p>Instead, if you ever need to tell it to use a different executable, simply do so via <code>~/.siterc</code>; for example:</p>

<div class="highlight highlight-bash"><pre><span class="k">function </span>grep<span class="o">()</span> <span class="o">{</span> /usr/local/bin/grep <span class="s2">"$@"</span><span class="p">;</span> <span class="k">return</span> <span class="nv">$?</span><span class="p">;</span> <span class="o">}</span>
</pre></div>

<p>That means that you do not need to change your <code>PATH</code> to accomodate it, and the only environment variable that site cares (deeply) about, is <code>PROFILE</code>.</p>

<hr><h1>
<a name="help" class="anchor" href="#help"><span class="octicon octicon-link"></span></a>HELP</h1>

<h2>
<a name="asking-for-help-support" class="anchor" href="#asking-for-help-support"><span class="octicon octicon-link"></span></a>Asking for Help (Support)</h2>

<p>If you want to keep up with the latest, follow us on <code>@SiteSysOpsUtil</code>.</p>

<p>If you need help, tweet the hashtag <code>#SiteSupport</code>.</p>

<h2>
<a name="offering-to-help-contribustion" class="anchor" href="#offering-to-help-contribustion"><span class="octicon octicon-link"></span></a>Offering to Help (Contribustion)</h2>

<p>We're always looking for users and developers.  Simply telling us about your experience installing and using site is of great value to us.  If you want to get your hands dirty, well send us a pull request!  Remember site is modular, and there is no reason why you couldn't add your own modules to site.  If those modules are generic and could be of use to other users, we would love to hear from you!</p>

<hr><h1>
<a name="philosophy" class="anchor" href="#philosophy"><span class="octicon octicon-link"></span></a>PHILOSOPHY</h1>

<p>Minimalism, simplicity, scalability, and code-reuse; these are some of the words that sang a tune in our ear while we were looking for a shell script framework.  We did find a couple of ideas floating around, but nothing that was actively developed or cam across as anything more than a hobby.</p>

<p>Enter: <strong>site</strong>!</p>

<p>Instead of hardcoding tediously long and complex commands over and over again in various scripts and various places, implement them once, and implement them well.  That is all you need to do (as far as scripting habits go), and you can start using site (almost) seamlessly.</p>

<p>All you have to do is to break up your scripts into small, single-purpose <em>functions</em>, and then group them contextually into <em>modules</em>.  Of course you don't have to break your scripts up at all if you don't want, you can simply wrap it in site to make it have a common home with you other scripts - but if do want reuse any part of that script, the this is the best way forward.</p>

<h2>
<a name="simplicity" class="anchor" href="#simplicity"><span class="octicon octicon-link"></span></a>Simplicity</h2>

<p>Site is simple to use; and most UI concerns are semi-automatically accounted for, simply as a result of you writing your code within the framework.</p>

<p>For example, if you implement a function called <code>say:hello()</code> in <code>~/.site/profile/module/say</code>, and another function `say:hello:usage()' which does what it says on the can, and you will instantly get:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>site
Using /bin/bash 4.2.37<span class="o">(</span>1<span class="o">)</span>-release <span class="o">(</span><span class="nb">export </span>SITE_SHELL to override<span class="o">)</span>

usage4nima@SITE01
    site say:1/0<span class="p">;</span> A module that greets the world
    ...
<span class="err">$</span>
</pre></div>

<p>Now that we know of the <code>say</code> module:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>site say
Using /bin/bash 4.2.37<span class="o">(</span>1<span class="o">)</span>-release <span class="o">(</span><span class="nb">export </span>SITE_SHELL to override<span class="o">)</span>

usage4nima@SITE01 say
    site say hello <span class="o">{</span>no-args<span class="o">}</span>
<span class="err">$</span>
</pre></div>

<p>And now, that we know how to use it:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>site say hello
Hello World!
<span class="err">$</span>
</pre></div>

<h2>
<a name="verifiability" class="anchor" href="#verifiability"><span class="octicon octicon-link"></span></a>Verifiability</h2>

<h3>
<a name="unit-testing-framework" class="anchor" href="#unit-testing-framework"><span class="octicon octicon-link"></span></a>Unit Testing Framework</h3>

<p>Scripts change over time, and so unit-testing is as relevant to systems scripts as it is to any piece of software.  Site comes with a flexible unit-testing module. This module reads everything it needs to know about every function test from a unit-testing configuration file, and warns you for functions that are missing unit-test data.</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>site unit <span class="nb">test</span>
</pre></div>

<p><strong>Note</strong>: Please only run this on a throw-away development host, as it needs to make changes to <code>/etc/hosts</code>, ssh user and hosts keys, and possibly more user/system files in order to allow for thorough unit-testing.  A safeguard has been added to the unit module to prevent you from (or forces some acrobatic shell loop hoppery upon you for) running the unit tests, so no need to fear - site is safe :).</p>

<h3>
<a name="bash-traceback" class="anchor" href="#bash-traceback"><span class="octicon octicon-link"></span></a>Bash Traceback</h3>

<p>That's right, we have a traceback so you can debug your scripts (site user modules).  Of course bash doesn't provide such functionality natively, so we had to get creative.</p>

<h2>
<a name="security-measures" class="anchor" href="#security-measures"><span class="octicon octicon-link"></span></a>Security Measures</h2>

<p>Site doesn't expect to be run as root; in fact it should <em>never</em> be run as root.  It will never <em>require</em> root access on your desktop machine - which is the only place it needs to be installed.</p>

<p>It could however need root access when communicating tasks to remote hosts, and in that event it will resort to your vault, as covered earlier.</p>

<hr><h6>
<a name="tags-abstraction-automation-reporting-verifiability-standards-monitoring-unit-testing-bash-ssh-tmux-netgroup-hosts-users-ldap-mongo-softlayer-gnupg-remote-execution-sudo-tmux-shell-scripting-traceback-ldif" class="anchor" href="#tags-abstraction-automation-reporting-verifiability-standards-monitoring-unit-testing-bash-ssh-tmux-netgroup-hosts-users-ldap-mongo-softlayer-gnupg-remote-execution-sudo-tmux-shell-scripting-traceback-ldif"><span class="octicon octicon-link"></span></a>TAGS: <code>abstraction</code>, <code>automation</code>, <code>reporting</code>, <code>verifiability</code>, <code>standards</code>, <code>monitoring</code>, <code>unit-testing</code>, <code>bash</code>, <code>ssh</code>, <code>tmux</code>, <code>netgroup</code>, <code>hosts</code>, <code>users</code>, <code>ldap</code>, <code>mongo</code>, <code>softlayer</code>, <code>gnupg</code>, <code>remote-execution</code>, <code>sudo</code>, <code>tmux</code>, <code>shell-scripting</code>, <code>traceback</code>, <code>ldif</code>
</h6>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>